{"uid":"47804933b10b6504","name":"should handle refresh token flow correctly in modal mode","fullName":"civic-auth/refresh/vanillajs-modal-refresh-token.spec.ts:12:7","historyId":"0650ddbeaf7e9e58b625b0286ac1193b:16da5751320efd68221c8b8753b00279","time":{"start":1760136550562,"stop":1760136574965,"duration":24403},"status":"failed","statusMessage":"Error: expect(locator).toContainText(expected) failed\n\nLocator: locator('[data-testid=\"vanilla-js-modal-status\"]')\nExpected substring: \"Ghost\"\nReceived string:    \"Modal: Starting...\"\nTimeout: 5000ms\n\nCall log:\n  - Expect \"toContainText\" with timeout 5000ms\n  - waiting for locator('[data-testid=\"vanilla-js-modal-status\"]')\n    9 × locator resolved to <div id=\"modalStatus\" class=\"status-item processing\" data-testid=\"vanilla-js-modal-status\">Modal: Starting...</div>\n      - unexpected value \"Modal: Starting...\"\n","statusTrace":"Error: expect(locator).toContainText(expected) failed\n\nLocator: locator('[data-testid=\"vanilla-js-modal-status\"]')\nExpected substring: \"Ghost\"\nReceived string:    \"Modal: Starting...\"\nTimeout: 5000ms\n\nCall log:\n  - Expect \"toContainText\" with timeout 5000ms\n  - waiting for locator('[data-testid=\"vanilla-js-modal-status\"]')\n    9 × locator resolved to <div id=\"modalStatus\" class=\"status-item processing\" data-testid=\"vanilla-js-modal-status\">Modal: Starting...</div>\n      - unexpected value \"Modal: Starting...\"\n\n    at /__w/civic-auth-examples/civic-auth-examples/packages/e2e/playwright/tests/civic-auth/refresh/vanillajs-modal-refresh-token.spec.ts:49:75","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"Error: expect(locator).toContainText(expected) failed\n\nLocator: locator('[data-testid=\"vanilla-js-modal-status\"]')\nExpected substring: \"Ghost\"\nReceived string:    \"Modal: Starting...\"\nTimeout: 5000ms\n\nCall log:\n  - Expect \"toContainText\" with timeout 5000ms\n  - waiting for locator('[data-testid=\"vanilla-js-modal-status\"]')\n    9 × locator resolved to <div id=\"modalStatus\" class=\"status-item processing\" data-testid=\"vanilla-js-modal-status\">Modal: Starting...</div>\n      - unexpected value \"Modal: Starting...\"\n","statusTrace":"Error: expect(locator).toContainText(expected) failed\n\nLocator: locator('[data-testid=\"vanilla-js-modal-status\"]')\nExpected substring: \"Ghost\"\nReceived string:    \"Modal: Starting...\"\nTimeout: 5000ms\n\nCall log:\n  - Expect \"toContainText\" with timeout 5000ms\n  - waiting for locator('[data-testid=\"vanilla-js-modal-status\"]')\n    9 × locator resolved to <div id=\"modalStatus\" class=\"status-item processing\" data-testid=\"vanilla-js-modal-status\">Modal: Starting...</div>\n      - unexpected value \"Modal: Starting...\"\n\n    at /__w/civic-auth-examples/civic-auth-examples/packages/e2e/playwright/tests/civic-auth/refresh/vanillajs-modal-refresh-token.spec.ts:49:75","steps":[{"name":"Before Hooks","time":{"start":1760136550568,"stop":1760136551656,"duration":1088},"status":"passed","steps":[{"name":"beforeEach hook","time":{"start":1760136550572,"stop":1760136551655,"duration":1083},"status":"passed","steps":[{"name":"Fixture \"browser\"","time":{"start":1760136550609,"stop":1760136550803,"duration":194},"status":"passed","steps":[{"name":"Launch browser","time":{"start":1760136550622,"stop":1760136550802,"duration":180},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true},{"name":"Fixture \"context\"","time":{"start":1760136550805,"stop":1760136550841,"duration":36},"status":"passed","steps":[{"name":"Create context","time":{"start":1760136550808,"stop":1760136550829,"duration":21},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true},{"name":"Fixture \"page\"","time":{"start":1760136550841,"stop":1760136551599,"duration":758},"status":"passed","steps":[{"name":"Create page","time":{"start":1760136550846,"stop":1760136551599,"duration":753},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true},{"name":"Allure Metadata (metadata)","time":{"start":1760136551640,"stop":1760136551640,"duration":0},"status":"unknown","steps":[],"attachments":[{"uid":"b3a03c1ecde7b36c","name":"error-context","source":"b3a03c1ecde7b36c.md","type":"text/markdown","size":1574}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true},{"name":"Allure Metadata (metadata)","time":{"start":1760136551647,"stop":1760136551647,"duration":0},"status":"unknown","steps":[],"attachments":[{"uid":"b23ae0f3738c00fd","name":"trace","source":"b23ae0f3738c00fd.zip","type":"application/zip","size":1323090}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true},{"name":"Allure Metadata (metadata)","time":{"start":1760136551651,"stop":1760136551651,"duration":0},"status":"unknown","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":9,"attachmentsCount":2,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":10,"attachmentsCount":2,"hasContent":true},{"name":"Navigate to \"/\"","time":{"start":1760136551683,"stop":1760136551907,"duration":224},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Wait for load state \"networkidle\"","time":{"start":1760136551910,"stop":1760136552368,"duration":458},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Wait for load state \"domcontentloaded\"","time":{"start":1760136552373,"stop":1760136552373,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Click locator('#startAuthModalButton')","time":{"start":1760136552381,"stop":1760136552568,"duration":187},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Wait for load state \"networkidle\"","time":{"start":1760136552569,"stop":1760136552570,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Wait for selector locator('#civic-auth-iframe')","time":{"start":1760136552571,"stop":1760136553047,"duration":476},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Wait for selector locator('#civic-auth-iframe').contentFrame().locator('body')","time":{"start":1760136553054,"stop":1760136554406,"duration":1352},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Click locator('#civic-auth-iframe').contentFrame().locator('[data-testid=\"civic-login-oidc-button-dummy\"]')","time":{"start":1760136554410,"stop":1760136557032,"duration":2622},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Wait for selector locator('#civic-auth-iframe')","time":{"start":1760136557033,"stop":1760136569719,"duration":12686},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Expect \"toContainText\"","time":{"start":1760136569721,"stop":1760136574731,"duration":5010},"status":"failed","statusMessage":"Error: expect(locator).toContainText(expected) failed\n\nLocator: locator('[data-testid=\"vanilla-js-modal-status\"]')\nExpected substring: \"Ghost\"\nReceived string:    \"Modal: Starting...\"\nTimeout: 5000ms\n\nCall log:\n  - Expect \"toContainText\" with timeout 5000ms\n  - waiting for locator('[data-testid=\"vanilla-js-modal-status\"]')\n    9 × locator resolved to <div id=\"modalStatus\" class=\"status-item processing\" data-testid=\"vanilla-js-modal-status\">Modal: Starting...</div>\n      - unexpected value \"Modal: Starting...\"\n","statusTrace":"Error: expect(locator).toContainText(expected) failed\n\nLocator: locator('[data-testid=\"vanilla-js-modal-status\"]')\nExpected substring: \"Ghost\"\nReceived string:    \"Modal: Starting...\"\nTimeout: 5000ms\n\nCall log:\n  - Expect \"toContainText\" with timeout 5000ms\n  - waiting for locator('[data-testid=\"vanilla-js-modal-status\"]')\n    9 × locator resolved to <div id=\"modalStatus\" class=\"status-item processing\" data-testid=\"vanilla-js-modal-status\">Modal: Starting...</div>\n      - unexpected value \"Modal: Starting...\"\n\n    at /__w/civic-auth-examples/civic-auth-examples/packages/e2e/playwright/tests/civic-auth/refresh/vanillajs-modal-refresh-token.spec.ts:49:75","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true},{"name":"After Hooks","time":{"start":1760136574732,"stop":1760136575216,"duration":484},"status":"passed","steps":[{"name":"Fixture \"page\"","time":{"start":1760136574917,"stop":1760136574918,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Fixture \"context\"","time":{"start":1760136574918,"stop":1760136575209,"duration":291},"status":"passed","steps":[{"name":"Close context","time":{"start":1760136575024,"stop":1760136575207,"duration":183},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true}],"attachments":[{"uid":"d7648ccf47bf1fde","name":"stdout","source":"d7648ccf47bf1fde.txt","type":"text/plain","size":123586}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":25,"attachmentsCount":3,"hasContent":true},"afterStages":[],"labels":[{"name":"language","value":"javascript"},{"name":"framework","value":"playwright"},{"name":"package","value":"civic-auth.refresh.vanillajs-modal-refresh-token.spec.ts"},{"name":"titlePath","value":" > WebKit > civic-auth/refresh/vanillajs-modal-refresh-token.spec.ts > Civic Auth Applications"},{"name":"host","value":"55c13913a0fc"},{"name":"thread","value":"pid-2287-worker-0"},{"name":"parentSuite","value":"WebKit"},{"name":"subSuite","value":"Civic Auth Applications"},{"name":"epic","value":"Civic Auth Applications"},{"name":"suite","value":"Refresh Token"},{"name":"feature","value":"VanillaJS Modal Refresh Token Flow"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"Project","value":"WebKit"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"7f6f82d466361f28","status":"failed","statusDetails":"TimeoutError: page.waitForSelector: Timeout 30000ms exceeded.\nCall log:\n  - waiting for locator('#civic-auth-iframe') to be hidden\n    64 × locator resolved to visible <iframe scrolling=\"no\" frameborder=\"0\" seamless=\"seamless\" id=\"civic-auth-iframe\" allowfullscreen=\"true\" data-testid=\"civic-auth-iframe-with-resizer\" allow=\"camera; screen-wake-lock; publickey-credentials-get *; publickey-credentials-create *\" src=\"https://auth-dev.civic.com/oauth/auth?client_id=demo-client-1&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2F&response_type=code&scope=openid+profile+email+forwardedTokens+offline_access&state=eyJ1dWlkIjoiMzU4Y2RkYTgtNzU1YS00YjBiLWIxYzctYzAxOWRkNWU4MzgzIiwiZG…></iframe>\n","time":{"start":1760136507601,"stop":1760136548777,"duration":41176}},{"uid":"e0bf9b93ce52755f","status":"failed","statusDetails":"Error: expect(locator).toContainText(expected) failed\n\nLocator: locator('[data-testid=\"vanilla-js-modal-status\"]')\nExpected substring: \"Ghost\"\nReceived string:    \"Modal: Starting...\"\nTimeout: 5000ms\n\nCall log:\n  - Expect \"toContainText\" with timeout 5000ms\n  - waiting for locator('[data-testid=\"vanilla-js-modal-status\"]')\n    9 × locator resolved to <div id=\"modalStatus\" class=\"status-item processing\" data-testid=\"vanilla-js-modal-status\">Modal: Starting...</div>\n      - unexpected value \"Modal: Starting...\"\n","time":{"start":1760136488562,"stop":1760136506653,"duration":18091}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"47804933b10b6504.json","parameterValues":["WebKit"]}