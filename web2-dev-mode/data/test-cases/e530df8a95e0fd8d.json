{"uid":"e530df8a95e0fd8d","name":"should handle refresh token flow correctly in modal mode","fullName":"civic-auth/refresh/vanillajs-modal-refresh-token.spec.ts:10:7","historyId":"0650ddbeaf7e9e58b625b0286ac1193b:16da5751320efd68221c8b8753b00279","time":{"start":1763070261191,"stop":1763070274127,"duration":12936},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":3,"retriesStatusChange":true,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Before Hooks","time":{"start":1763070261194,"stop":1763070261950,"duration":756},"status":"passed","steps":[{"name":"beforeEach hook","time":{"start":1763070261195,"stop":1763070261950,"duration":755},"status":"passed","steps":[{"name":"Fixture \"browser\"","time":{"start":1763070261211,"stop":1763070261288,"duration":77},"status":"passed","steps":[{"name":"Launch browser","time":{"start":1763070261214,"stop":1763070261288,"duration":74},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fixture \"context\"","time":{"start":1763070261291,"stop":1763070261305,"duration":14},"status":"passed","steps":[{"name":"Create context","time":{"start":1763070261292,"stop":1763070261300,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fixture \"page\"","time":{"start":1763070261305,"stop":1763070261925,"duration":620},"status":"passed","steps":[{"name":"Create page","time":{"start":1763070261306,"stop":1763070261925,"duration":619},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Allure Metadata (metadata)","time":{"start":1763070261944,"stop":1763070261944,"duration":0},"status":"unknown","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Allure Metadata (metadata)","time":{"start":1763070261948,"stop":1763070261948,"duration":0},"status":"unknown","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Allure Metadata (metadata)","time":{"start":1763070261949,"stop":1763070261949,"duration":0},"status":"unknown","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":9,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":10,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Navigate to \"/\"","time":{"start":1763070261953,"stop":1763070262083,"duration":130},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Wait for load state \"networkidle\"","time":{"start":1763070262084,"stop":1763070262551,"duration":467},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Wait for load state \"domcontentloaded\"","time":{"start":1763070262552,"stop":1763070262552,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Click locator('#startAuthModalButton')","time":{"start":1763070262556,"stop":1763070262637,"duration":81},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Wait for load state \"networkidle\"","time":{"start":1763070262638,"stop":1763070262639,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Wait for selector locator('#civic-auth-iframe')","time":{"start":1763070262641,"stop":1763070263604,"duration":963},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Wait for selector locator('#civic-auth-iframe').contentFrame().locator('body')","time":{"start":1763070263609,"stop":1763070263665,"duration":56},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Click locator('#civic-auth-iframe').contentFrame().locator('[data-testid=\"civic-login-oidc-button-dummy\"]')","time":{"start":1763070263668,"stop":1763070266632,"duration":2964},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Wait for selector locator('#civic-auth-iframe')","time":{"start":1763070266634,"stop":1763070269506,"duration":2872},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Expect \"toContainText\"","time":{"start":1763070269508,"stop":1763070269909,"duration":401},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Expect \"toHaveClass\"","time":{"start":1763070269910,"stop":1763070269925,"duration":15},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Evaluate","time":{"start":1763070269926,"stop":1763070269946,"duration":20},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Expect \"toBeTruthy\"","time":{"start":1763070269947,"stop":1763070269948,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Expect \"toBeTruthy\"","time":{"start":1763070269948,"stop":1763070269948,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Expect \"toBeTruthy\"","time":{"start":1763070269949,"stop":1763070269949,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Expect \"toBeTruthy\"","time":{"start":1763070269950,"stop":1763070269950,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Expect \"toBeTruthy\"","time":{"start":1763070269951,"stop":1763070269951,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Evaluate","time":{"start":1763070269952,"stop":1763070269956,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Reload","time":{"start":1763070269957,"stop":1763070270831,"duration":874},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Wait for timeout","time":{"start":1763070270832,"stop":1763070273835,"duration":3003},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Evaluate","time":{"start":1763070273836,"stop":1763070273841,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Expect \"toBeTruthy\"","time":{"start":1763070273841,"stop":1763070273842,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Expect \"not toBe\"","time":{"start":1763070273842,"stop":1763070273842,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Expect \"toBeTruthy\"","time":{"start":1763070273843,"stop":1763070273843,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Expect \"toBeGreaterThan\"","time":{"start":1763070273843,"stop":1763070273844,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Expect \"toBeTruthy\"","time":{"start":1763070273844,"stop":1763070273844,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Expect \"toBeTruthy\"","time":{"start":1763070273845,"stop":1763070273845,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Expect \"toBeTruthy\"","time":{"start":1763070273845,"stop":1763070273845,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Expect \"not toBe\"","time":{"start":1763070273846,"stop":1763070273846,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Expect \"not toBe\"","time":{"start":1763070273846,"stop":1763070273846,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Expect \"not toBe\"","time":{"start":1763070273847,"stop":1763070273847,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Expect \"toContainText\"","time":{"start":1763070273847,"stop":1763070273864,"duration":17},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Expect \"toHaveClass\"","time":{"start":1763070273864,"stop":1763070273872,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"After Hooks","time":{"start":1763070273872,"stop":1763070274230,"duration":358},"status":"passed","steps":[{"name":"Fixture \"page\"","time":{"start":1763070273873,"stop":1763070273873,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Fixture \"context\"","time":{"start":1763070273874,"stop":1763070274225,"duration":351},"status":"passed","steps":[{"name":"Close context","time":{"start":1763070274055,"stop":1763070274225,"duration":170},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":3,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"bc5abc8aa35c73c","name":"stdout","source":"bc5abc8aa35c73c.txt","type":"text/plain","size":685}],"parameters":[],"stepsCount":48,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"language","value":"javascript"},{"name":"framework","value":"playwright"},{"name":"package","value":"civic-auth.refresh.vanillajs-modal-refresh-token.spec.ts"},{"name":"titlePath","value":" > WebKit > civic-auth/refresh/vanillajs-modal-refresh-token.spec.ts > Civic Auth Applications"},{"name":"host","value":"0a87ee56323b"},{"name":"thread","value":"pid-2279-worker-0"},{"name":"parentSuite","value":"WebKit"},{"name":"subSuite","value":"Civic Auth Applications"},{"name":"epic","value":"Civic Auth Applications"},{"name":"suite","value":"Refresh Token"},{"name":"feature","value":"VanillaJS Modal Refresh Token Flow"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"Project","value":"WebKit"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"1dbbf76fe0748598","status":"failed","statusDetails":"TimeoutError: page.waitForSelector: Timeout 30000ms exceeded.\nCall log:\n  - waiting for locator('#civic-auth-iframe') to be hidden\n    64 × locator resolved to visible <iframe scrolling=\"no\" frameborder=\"0\" seamless=\"seamless\" id=\"civic-auth-iframe\" allowfullscreen=\"true\" data-testid=\"civic-auth-iframe-with-resizer\" allow=\"camera; screen-wake-lock; publickey-credentials-get *; publickey-credentials-create *; local-network-access *\" src=\"https://auth-dev.civic.com/oauth/auth?client_id=demo-client-1&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2F&response_type=code&scope=openid+profile+email+forwardedTokens+offline_access&state=eyJ1dWlkIjoiN2EzYjlhNWUtM2E4Ny00MTlkLTkzNm…></iframe>\n","time":{"start":1763070223905,"stop":1763070260298,"duration":36393}},{"uid":"bbe4417884762275","status":"passed","time":{"start":1763069895502,"stop":1763069908463,"duration":12961}},{"uid":"79f2b62b3909081b","status":"failed","statusDetails":"TimeoutError: page.waitForSelector: Timeout 30000ms exceeded.\nCall log:\n  - waiting for locator('#civic-auth-iframe') to be hidden\n    63 × locator resolved to visible <iframe scrolling=\"no\" frameborder=\"0\" seamless=\"seamless\" id=\"civic-auth-iframe\" allowfullscreen=\"true\" data-testid=\"civic-auth-iframe-with-resizer\" allow=\"camera; screen-wake-lock; publickey-credentials-get *; publickey-credentials-create *; local-network-access *\" src=\"https://auth-dev.civic.com/oauth/auth?client_id=demo-client-1&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2F&response_type=code&scope=openid+profile+email+forwardedTokens+offline_access&state=eyJ1dWlkIjoiZDc5MWJmYzItYzI5MC00Mzg0LWI2NW…></iframe>\n","time":{"start":1763069855544,"stop":1763069894152,"duration":38608}}],"categories":[],"tags":[]},"source":"e530df8a95e0fd8d.json","parameterValues":["WebKit"]}